<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>IV Estimation of 2^K Factorial Design — iv_factorial • factiv</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="IV Estimation of 2^K Factorial Design — iv_factorial" />
<meta property="og:description" content="Estimates principal stratum-specific effects and interactions in a
2^K factorial experiment" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">factiv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/factiv.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mattblackwell/factiv/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>IV Estimation of 2^K Factorial Design</h1>
    <small class="dont-index">Source: <a href='https://github.com/mattblackwell/factiv/blob/master/R/iv_interactions.R'><code>R/iv_interactions.R</code></a></small>
    <div class="hidden name"><code>iv_factorial.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Estimates principal stratum-specific effects and interactions in a
2^K factorial experiment</p>
    </div>

    <pre class="usage"><span class='fu'>iv_factorial</span><span class='op'>(</span><span class='va'>formula</span>, <span class='va'>data</span>, <span class='va'>subset</span>, method <span class='op'>=</span> <span class='st'>"lm"</span>, level <span class='op'>=</span> <span class='fl'>0.95</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>formula specification of the factorial design with
noncompliance. The right-hand side of the formula should have
two components separated by the <code><a href='https://rdrr.io/r/base/Logic.html'>|</a></code> symbol, with the first
component containing the K binary treatment variables and the
second component containing the K binary instruments associated
with each treatment variable. The order of the variables in the
formula must match.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>A data.frame on which to apply the <code>formula</code>.</p></td>
    </tr>
    <tr>
      <th>subset</th>
      <td><p>subset of the data to pass to estimation.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>character indiciating if the estimator should be
<code>"lm"</code> using the least squares approach (default) or
<code>"cmd"</code> to estimate via efficent minimum distance estimator.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>the confidence level required.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of class <code>iv_factorial</code> that contains the following
components:</p>
<dt>rho</dt><dd><p>vector of estimated compliance class
probabilities.</p></dd>
<dt>psi</dt><dd><p>vector of the estimated conditional mean of the outcome
within the compliance classes.</p></dd>
<dt>vcov</dt><dd><p>estimated asymptotic variance matrix of the combined
<code>rho</code>  and <code>psi</code> parameters.</p></dd>
<dt>pcafe_est</dt><dd><p>vector of estimated main effects of each factor among
perfect compliers.</p></dd>
<dt>pcafe_se</dt><dd><p>vector of estimated standard errors for the
estimated effects in <code>tau</code>.</p></dd>
<dt>pcafe_cis</dt><dd><p>a matrix of confidence intervals for the PCAFE
estimates.</p></dd>
<dt>level</dt><dd><p>the confidence level of the returned confience
intervals.</p></dd>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function estimates treatment effects for 2^K factorial
experiments in the face of noncompliance on all factors. A
monotonicity assumption is assumed for both treatment-instrument
pairs, along with treatment exclusion. See Blackwell (2017) for
more details on those assumptions.</p>
<p>The procedure uses iterative generalized method of moments (GMM)
to  estimate both the proportions of each compliance class (also
known as principal strata) and the average potential outcomes
within those classes. It also provides estimates of several
one-way, joint, and interactive treatment effects within these
classes.</p>
<p>Under the above assumptions, the compliance classes are the
product of the compliance classes for each treatment-instrument
pair. For instance, <code>"cc"</code> is the class that would comply
with both treatments, <code>"ca"</code> is the class that would comply
with the first treatment and always take the second treatment, and
<code>"cn"</code> is the class that would comply with the first
treatment and never take the second treatment. Finally, note that
treatment effects are only well-defined for compliance classes for
which there is compliance on at least one treatment.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Matthew Blackwell (2017) Instrumental Variable Methods
for Conditional Effects and Causal Interaction in Voter
Mobilization Experiments, Journal of the American Statistical
Association, 112:518, 590-599,
<a href='https://doi.org/10.1080/01621459.2016.1246363'>https://doi.org/10.1080/01621459.2016.1246363</a></p>
<p>Matthew Blackwell and Nicole Pashley (2020) "Noncompliance in
Factorial Experiments." Working paper.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Matt Blackwell</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>newhaven</span><span class='op'>)</span>

<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>iv_factorial</span><span class='op'>(</span><span class='va'>turnout_98</span> <span class='op'>~</span> <span class='va'>inperson</span> <span class='op'>+</span> <span class='va'>phone</span> <span class='op'>|</span> <span class='va'>inperson_rand</span>
  <span class='op'>+</span> <span class='va'>phone_rand</span>, data <span class='op'>=</span> <span class='va'>newhaven</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;  Main effects among perfect compliers:
#&gt;                                      tval  pval
#&gt; inperson        0.08204  0.35517  0.23099 0.817
#&gt; phone           0.09320  0.36317  0.25664 0.797
#&gt; inperson:phone -0.10452  0.29398 -0.35553 0.722
#&gt; 
#&gt; Estimated prob. of perfect compliers:  0.07969 	SE =  0.02311</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthew Blackwell, Nicole Pashley.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


